#!/usr/bin/make -f
#
# debian/rules for ucblogo package

build:
	dh_testdir
	./configure
	$(MAKE) LIBLOC=/usr/share/ucblogo CFLAGS="-O2 -Wall -g"
	touch build

clean:
	dh_testdir
	$(MAKE) -i clean || $(MAKE) -i -f makefile.in clean
	-rm -f build
	-rm -f makefile config.h config.cache config.log config.status \
		core logo makehelp
	-rm -rf *~ debian/tmp debian/{*~,files*,substvars}
	# -rm -rf helpfiles
	dh_clean

binary-indep: checkroot build
# None
	@echo 'No architecture independend package components.'; false

binary binary-arch: build
	dh_testdir
	dh_testroot
	dh_clean

	dh_installdirs
	install -s logo debian/tmp/usr/bin/ucblogo
	ln -s ucblogo debian/tmp/usr/bin/logo

	cp -r helpfiles/* debian/tmp/usr/share/ucblogo/helpfiles/.
	cp -r logolib/* debian/tmp/usr/share/ucblogo/logolib/.
	cp -r csls/* debian/tmp/usr/share/ucblogo/csls/.

	dh_installmanpages
	ln -s ucblogo.1.gz debian/tmp/usr/share/man/man1/logo.1.gz

	dh_installdocs README usermanual
	dh_installchangelogs

	dh_strip
	dh_compress
	dh_fixperms
	dh_installdeb
	dh_shlibdeps
	dh_gencontrol
	dh_md5sums
	dh_builddeb

.PHONY: binary binary-arch binary-indep clean checkroot

